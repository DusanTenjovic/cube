environment:
    # VICOS_CUBE_GUI_DIR: "/path/to/vicos-cube/cube-main" # this should be set in the environment by *.sh
    # VICOS_CUBE_VIRTENV: "/path/to/vicos-cube/venv" # this should be set in the environment by *.sh
    PYTHONEXEC: "${VICOS_CUBE_VIRTENV}/bin/python3.10"
    DOCKEREXEC: "docker"
    BUS: "/tmp/echo.sock"
plugins:
    - echolib.ignition.Mapping
    - docker
programs:
    router:
        required: True
        command: ${PYTHONEXEC} -m echolib
    camera: 
        required: True
        depends:
           - router
        docker:
            image: camerafeed_allied:v1
            volumes:
                - ${VICOS_CUBE_GUI_DIR}/config/camera_allied.json:/opt/config/camera0.json
                - /tmp/echo.sock:/tmp/echo.sock
            devices:
                - /dev/bus/usb/002
        console: True
        command: ""
        remap:
            camera_stream_0: camera0
    manager:
        required: True
        depends:
           - router
           - camera
        directory: "${VICOS_CUBE_GUI_DIR}"
        command: ${PYTHONEXEC} -u docker_manager.py
        console: True
        environment:
            PYTHONPATH: "${VICOS_CUBE_GUI_DIR}"
    gui:
        required: True
        command: ${PYTHONEXEC} -u gui_main.py
        directory: "${VICOS_CUBE_GUI_DIR}"
        depends:
           - router
           - manager
        console: True
        environment:
            PYTHONPATH: "${VICOS_CUBE_GUI_DIR}"
    
